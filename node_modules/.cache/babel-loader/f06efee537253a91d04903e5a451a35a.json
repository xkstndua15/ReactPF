{"ast":null,"code":"import _regeneratorRuntime from\"E:/react/react_pf/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/react/react_pf/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/react/react_pf/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Layout from'../common/Layout';import{useState,useEffect,useRef}from'react';import axios from'axios';import Popup from'../common/Popup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Gallery(){var desc='Lorem ipsum, dolor sit amet consectetur adipisicing elit. Veritatis, facilis. Officiis nam distinctio libero delectus cum aperiam eius reiciendis quae provident, fuga esse illum! Provident sunt quam nam? Reprehenderit, ipsum?';var path=process.env.PUBLIC_URL;var frame=useRef(null);var btn=useRef(null);var pop=useRef(null);var _useState=useState(10),_useState2=_slicedToArray(_useState,2),Num=_useState2[0],setNum=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),Items=_useState4[0],setItems=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),Index=_useState6[0],setIndex=_useState6[1];var getFlickr=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var key,method_user,usr,url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:key='b74012b5c1b79c7c3bc8c8e61f3b23f0';method_user='flickr.people.getPhotos';usr='195955518@N03';url=\"https://www.flickr.com/services/rest/?method=\".concat(method_user,\"&per_page=\").concat(Num,\"&api_key=\").concat(key,\"&format=json&nojsoncallback=1&user_id=\").concat(usr);_context.next=6;return axios.get(url).then(function(json){setItems(json.data.photos.photo);});case 6:case\"end\":return _context.stop();}}},_callee);}));return function getFlickr(){return _ref.apply(this,arguments);};}();var increaseList=function increaseList(){if(Num>=20)return;setNum(Num*2);if(Num*2>=20){btn.current.classList.add('off');console.log(btn.current.classList);}};useEffect(function(){getFlickr();},[Num]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Layout,{name:'Gallery',desc:desc,visual:\"\".concat(path,\"/img/sub/gallery/visual.jpg\")}),/*#__PURE__*/_jsxs(\"div\",{id:\"gallery\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Our Gallery\"}),/*#__PURE__*/_jsx(\"div\",{className:\"frame\",ref:frame,children:Items.map(function(item,idx){return/*#__PURE__*/_jsx(\"article\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"inner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pic\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://live.staticflickr.com/\".concat(item.server,\"/\").concat(item.id,\"_\").concat(item.secret,\"_m.jpg\"),alt:item.title,onClick:function onClick(){setIndex(idx);pop.current.open();}})}),/*#__PURE__*/_jsx(\"h4\",{children:item.title}),/*#__PURE__*/_jsx(\"div\",{className:\"profile\",children:/*#__PURE__*/_jsx(\"span\",{children:item.desc})})]})},idx);})}),/*#__PURE__*/_jsx(\"button\",{onClick:increaseList,ref:btn,children:\"View more\"})]}),/*#__PURE__*/_jsx(Popup,{ref:pop,children:Items.length!==0&&/*#__PURE__*/_jsx(\"img\",{src:\"https://live.staticflickr.com/\".concat(Items[Index].server,\"/\").concat(Items[Index].id,\"_\").concat(Items[Index].secret,\"_b.jpg\"),alt:Items[Index].title})})]});}export default Gallery;","map":{"version":3,"names":["Layout","useState","useEffect","useRef","axios","Popup","Gallery","desc","path","process","env","PUBLIC_URL","frame","btn","pop","Num","setNum","Items","setItems","Index","setIndex","getFlickr","key","method_user","usr","url","get","then","json","data","photos","photo","increaseList","current","classList","add","console","log","map","item","idx","server","id","secret","title","open","length"],"sources":["E:/react/react_pf/src/components/sub/Gallery.js"],"sourcesContent":["import Layout from '../common/Layout';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport Popup from '../common/Popup';\r\n\r\nfunction Gallery() {\r\n\tconst desc =\r\n\t\t'Lorem ipsum, dolor sit amet consectetur adipisicing elit. Veritatis, facilis. Officiis nam distinctio libero delectus cum aperiam eius reiciendis quae provident, fuga esse illum! Provident sunt quam nam? Reprehenderit, ipsum?';\r\n\tconst path = process.env.PUBLIC_URL;\r\n\r\n\tconst frame = useRef(null);\r\n\tconst btn = useRef(null);\r\n\tconst pop = useRef(null);\r\n\r\n\tconst [Num, setNum] = useState(10);\r\n\tconst [Items, setItems] = useState([]);\r\n\tconst [Index, setIndex] = useState(0);\r\n\r\n\tconst getFlickr = async () => {\r\n\t\tconst key = 'b74012b5c1b79c7c3bc8c8e61f3b23f0';\r\n\t\tconst method_user = 'flickr.people.getPhotos';\r\n\t\tconst usr = '195955518@N03';\r\n\r\n\t\tlet url = `https://www.flickr.com/services/rest/?method=${method_user}&per_page=${Num}&api_key=${key}&format=json&nojsoncallback=1&user_id=${usr}`;\r\n\r\n\t\tawait axios.get(url).then((json) => {\r\n\t\t\tsetItems(json.data.photos.photo);\r\n\t\t});\r\n\t};\r\n\tconst increaseList = () => {\r\n\t\tif (Num >= 20) return;\r\n\r\n\t\tsetNum(Num * 2);\r\n\r\n\t\tif (Num * 2 >= 20) {\r\n\t\t\tbtn.current.classList.add('off');\r\n\t\t\tconsole.log(btn.current.classList);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tgetFlickr();\r\n\t}, [Num]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Layout\r\n\t\t\t\tname={'Gallery'}\r\n\t\t\t\tdesc={desc}\r\n\t\t\t\tvisual={`${path}/img/sub/gallery/visual.jpg`}></Layout>\r\n\t\t\t<div id='gallery'>\r\n\t\t\t\t<h3>Our Gallery</h3>\r\n\t\t\t\t<div className='frame' ref={frame}>\r\n\t\t\t\t\t{Items.map((item, idx) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<article key={idx}>\r\n\t\t\t\t\t\t\t\t<div className='inner'>\r\n\t\t\t\t\t\t\t\t\t<div className='pic'>\r\n\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={`https://live.staticflickr.com/${item.server}/${item.id}_${item.secret}_m.jpg`}\r\n\t\t\t\t\t\t\t\t\t\t\talt={item.title}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetIndex(idx);\r\n\t\t\t\t\t\t\t\t\t\t\t\tpop.current.open();\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<h4>{item.title}</h4>\r\n\t\t\t\t\t\t\t\t\t<div className='profile'>\r\n\t\t\t\t\t\t\t\t\t\t<span>{item.desc}</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button onClick={increaseList} ref={btn}>\r\n\t\t\t\t\tView more\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<Popup ref={pop}>\r\n\t\t\t\t{Items.length !== 0 && (\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={`https://live.staticflickr.com/${Items[Index].server}/${Items[Index].id}_${Items[Index].secret}_b.jpg`}\r\n\t\t\t\t\t\talt={Items[Index].title}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Popup>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Gallery;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}